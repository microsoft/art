trigger:
  branches:
    include:
      - master
  paths:
    exclude:
      - '*.md'

pr:
  branches:
    include:
      - master
  paths:
    exclude:
      - '*.md'

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: CondaEnvironment@0
  inputs:
    environmentName: 'azureml-deploy'
    packageSpecs: 'python=3'
- task: AzureCLI@2
  inputs:
    azureSubscription: 'MMLSpark Connection'
    scriptType: 'bash'
    scriptLocation: 'inlineScript'
    inlineScript: |
      pip install -r azureml/requirements.txt
      python3 azureml/deploy.py
